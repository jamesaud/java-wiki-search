<html>
    <body>
        <header>
            <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ" crossorigin="anonymous">
        </header>

        <div class="container">
            <div class="row">
                <div class="col-sm-12">
                    <h1 class="title">Bento for Business Path to Philosophy Challenge</h1>
                </div>
            </div>

            <br><br>

            <div class="row">
                <div class="col-sm-8 col-sm-offset-2">
                    <form id="wiki-form">
                        <label class="control-label" for="wiki-input">Wikipedia Search Term</label>
                        <div class="input-group">
                            <input type="text" class="form-control" id="wiki-input" placeholder="Benedict_Cumberbatch">
                            <span class="input-group-btn" id="basic-addon2">
                                <button class="btn btn-info" type="submit" value="Submit">Submit</button>
                            </span>
                        </div>
                    </form>
                </div>
            </div>
            
            <div class="row">
                <div class="col-sm-8 col-sm-offset-2">
                    <div id="path"></div>
                </div>
            </div>
            
        </div>


        <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>

        <script>
        $(document).ready( function(){
            
            function get_path(start){
                $("#path").html("Trying to find the path...");

                $.get("/path?start=" + start, function(data){
                    let result;
                    
                    if (data.errors){
                        result = data.errors;
                    }
                    else{
                        result = "";
                        for (let i=0; i < data.result.length; i++){
                            let link = data.result[i];
                            if (i === data.result.length - 1){  // The last element, don't add an arrow
                                result += `<div style="display: block;">${link}</div>`;
                            }
                            else{
                                result += `<div style="display: block;">${link} -></div>`;
                            }
                        }
                    }
                    $("#path").html(result);
                });}
            

            $("#wiki-form").submit(function(e){
                console.log("Called function");
                e.preventDefault();
                let val = $('#wiki-input').val();
                get_path(val);
            });
        });
        </script>

    </body>



</html>